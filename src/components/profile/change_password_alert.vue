<template>
  <div class="alert-container">
    <div class="alert-content-container">
      <div class="close-button" @click="closeAlert">
        <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <g clip-path="url(#clip0_7_2)">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M12 14.121L17.303 19.425C17.5844 19.7064 17.966 19.8645 18.364 19.8645C18.762 19.8645 19.1436 19.7064 19.425 19.425C19.7064 19.1436 19.8645 18.762 19.8645 18.364C19.8645 17.966 19.7064 17.5844 19.425 17.303L14.12 12L19.424 6.697C19.5633 6.55767 19.6737 6.39227 19.7491 6.21025C19.8244 6.02823 19.8632 5.83315 19.8631 5.63615C19.8631 5.43915 19.8242 5.24409 19.7488 5.0621C19.6734 4.88011 19.5628 4.71477 19.4235 4.5755C19.2842 4.43623 19.1188 4.32577 18.9367 4.25043C18.7547 4.17508 18.5596 4.13633 18.3626 4.13637C18.1656 4.13642 17.9706 4.17527 17.7886 4.2507C17.6066 4.32613 17.4413 4.43667 17.302 4.576L12 9.879L6.697 4.576C6.5587 4.43267 6.39323 4.31832 6.21027 4.23962C6.0273 4.16092 5.83049 4.11945 5.63132 4.11763C5.43215 4.1158 5.23462 4.15366 5.05024 4.229C4.86586 4.30433 4.69833 4.41563 4.55742 4.55641C4.41652 4.69718 4.30506 4.8646 4.22955 5.04891C4.15404 5.23322 4.116 5.43072 4.11763 5.62989C4.11927 5.82906 4.16056 6.02591 4.23908 6.20895C4.31761 6.39199 4.4318 6.55756 4.575 6.696L9.88 12L4.576 17.303C4.29461 17.5844 4.13652 17.966 4.13652 18.364C4.13652 18.762 4.29461 19.1436 4.576 19.425C4.85739 19.7064 5.23905 19.8645 5.637 19.8645C6.03495 19.8645 6.41661 19.7064 6.698 19.425L12 14.12V14.121Z" />
          </g>
          <defs>
            <clipPath id="clip0_7_2">
              <rect width="24" height="24" />
            </clipPath>
          </defs>
        </svg>
      </div>
      <div style="flex: 1; text-align: center;">
        <p class="header">Change password</p>
        <p class="info">Enter your old and new password</p>
        <div class="field-container">
          <p>Old password</p>
          <div class="input-container">
            <svg width="89" height="92" viewBox="0 0 89 92" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g opacity="0.3" clip-path="url(#clip0_669_567)">
                <path d="M70.4577 32.292V26.8333C70.4577 19.7167 67.7228 12.8915 62.8547 7.8593C57.9865 2.82708 51.3839 0 44.4994 0C37.6148 0 31.0122 2.82708 26.144 7.8593C21.2759 12.8915 18.541 19.7167 18.541 26.8333V32.292C15.2382 33.782 12.4271 36.2347 10.4513 39.35C8.47551 42.4653 7.42076 46.1082 7.41602 49.8333V72.8333C7.4219 77.9148 9.37729 82.7864 12.8532 86.3795C16.3292 89.9726 21.0419 91.9939 25.9577 92H63.041C67.9568 91.9939 72.6695 89.9726 76.1455 86.3795C79.6214 82.7864 81.5768 77.9148 81.5827 72.8333V49.8333C81.5779 46.1082 80.5232 42.4653 78.5474 39.35C76.5716 36.2347 73.7605 33.782 70.4577 32.292ZM25.9577 26.8333C25.9577 21.75 27.9112 16.8749 31.3884 13.2805C34.8656 9.68601 39.5818 7.66667 44.4994 7.66667C49.4169 7.66667 54.1331 9.68601 57.6103 13.2805C61.0875 16.8749 63.041 21.75 63.041 26.8333V30.6667H25.9577V26.8333ZM74.166 72.8333C74.166 75.8833 72.9939 78.8084 70.9076 80.9651C68.8212 83.1217 65.9916 84.3333 63.041 84.3333H25.9577C23.0071 84.3333 20.1775 83.1217 18.0911 80.9651C16.0048 78.8084 14.8327 75.8833 14.8327 72.8333V49.8333C14.8327 46.7833 16.0048 43.8583 18.0911 41.7016C20.1775 39.5449 23.0071 38.3333 25.9577 38.3333H63.041C65.9916 38.3333 68.8212 39.5449 70.9076 41.7016C72.9939 43.8583 74.166 46.7833 74.166 49.8333V72.8333Z" fill="black"/>
                <path d="M44.5001 53.6667C43.5166 53.6667 42.5733 54.0706 41.8779 54.7895C41.1824 55.5084 40.7917 56.4834 40.7917 57.5001V65.1667C40.7917 66.1834 41.1824 67.1584 41.8779 67.8773C42.5733 68.5962 43.5166 69.0001 44.5001 69.0001C45.4836 69.0001 46.4268 68.5962 47.1223 67.8773C47.8177 67.1584 48.2084 66.1834 48.2084 65.1667V57.5001C48.2084 56.4834 47.8177 55.5084 47.1223 54.7895C46.4268 54.0706 45.4836 53.6667 44.5001 53.6667Z" fill="black"/>
              </g>
              <defs>
                <clipPath id="clip0_669_567">
                  <rect width="89" height="92" fill="white"/>
                </clipPath>
              </defs>
            </svg>
            <input placeholder="Old password" type="password" v-model="oldPassword">
          </div>
        </div>
        <div class="field-container">
          <p>New password</p>
          <div class="input-container">
            <svg width="89" height="92" viewBox="0 0 89 92" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g opacity="0.3" clip-path="url(#clip0_669_567)">
                <path d="M70.4577 32.292V26.8333C70.4577 19.7167 67.7228 12.8915 62.8547 7.8593C57.9865 2.82708 51.3839 0 44.4994 0C37.6148 0 31.0122 2.82708 26.144 7.8593C21.2759 12.8915 18.541 19.7167 18.541 26.8333V32.292C15.2382 33.782 12.4271 36.2347 10.4513 39.35C8.47551 42.4653 7.42076 46.1082 7.41602 49.8333V72.8333C7.4219 77.9148 9.37729 82.7864 12.8532 86.3795C16.3292 89.9726 21.0419 91.9939 25.9577 92H63.041C67.9568 91.9939 72.6695 89.9726 76.1455 86.3795C79.6214 82.7864 81.5768 77.9148 81.5827 72.8333V49.8333C81.5779 46.1082 80.5232 42.4653 78.5474 39.35C76.5716 36.2347 73.7605 33.782 70.4577 32.292ZM25.9577 26.8333C25.9577 21.75 27.9112 16.8749 31.3884 13.2805C34.8656 9.68601 39.5818 7.66667 44.4994 7.66667C49.4169 7.66667 54.1331 9.68601 57.6103 13.2805C61.0875 16.8749 63.041 21.75 63.041 26.8333V30.6667H25.9577V26.8333ZM74.166 72.8333C74.166 75.8833 72.9939 78.8084 70.9076 80.9651C68.8212 83.1217 65.9916 84.3333 63.041 84.3333H25.9577C23.0071 84.3333 20.1775 83.1217 18.0911 80.9651C16.0048 78.8084 14.8327 75.8833 14.8327 72.8333V49.8333C14.8327 46.7833 16.0048 43.8583 18.0911 41.7016C20.1775 39.5449 23.0071 38.3333 25.9577 38.3333H63.041C65.9916 38.3333 68.8212 39.5449 70.9076 41.7016C72.9939 43.8583 74.166 46.7833 74.166 49.8333V72.8333Z" fill="black"/>
                <path d="M44.5001 53.6667C43.5166 53.6667 42.5733 54.0706 41.8779 54.7895C41.1824 55.5084 40.7917 56.4834 40.7917 57.5001V65.1667C40.7917 66.1834 41.1824 67.1584 41.8779 67.8773C42.5733 68.5962 43.5166 69.0001 44.5001 69.0001C45.4836 69.0001 46.4268 68.5962 47.1223 67.8773C47.8177 67.1584 48.2084 66.1834 48.2084 65.1667V57.5001C48.2084 56.4834 47.8177 55.5084 47.1223 54.7895C46.4268 54.0706 45.4836 53.6667 44.5001 53.6667Z" fill="black"/>
              </g>
              <defs>
                <clipPath id="clip0_669_567">
                  <rect width="89" height="92" fill="white"/>
                </clipPath>
              </defs>
            </svg>
            <input placeholder="New password" type="password" v-model="password">
          </div>
        </div>
        <div class="primary-button" @click="changePassword">Save</div>
      </div>
    </div>
  </div>
</template>

<script>

import api from "@/service/api.js";

export default {
  name: "v-change-password-alert",
  data() {
    return {
      oldPassword: "",
      password: ""
    }
  },
  methods: {
    closeAlert: function () {
      this.$emit('close')
    },
    changePassword() {
      api.profile.changePassword({
        data: {
          password: this.password,
          oldPassword: this.oldPassword
        }
      }).then(() => {
        this.closeAlert();
      }).catch(() => {
        alert("Wrong old password");
      })
    }
  }
}
</script>

<style scoped>

.header {
  font-size: 22px;
  font-family: Rubik-regular, system-ui;
  font-weight: 600;
  color: black;
}
.info {
  margin-top: 4px;
  color: rgba(0, 0, 0, 0.5);
  font-size: 16px;
  font-family: Rubik-regular, system-ui;
}
.field-container {
  margin-top: 15px;
  margin-left: auto;
  margin-right: auto;
  text-align: start;
}
.field-container>p {
  font-size: 15px;
  color: black;
  font-family: Rubik-regular, system-ui;
}
.input-container {
  margin-top: 7px;
  display: flex;
  padding: 10px 10px 10px 14px;
  border: 1px solid rgba(0, 0, 0, 0.3);
  border-radius: 10px;
  vertical-align: middle;
  align-items: center;
}
.input-container>svg {
  width: 22px;
  height: 22px;
}
.input-container>input {
  border: none;
  flex: 1;
  padding-top: 4px;
  padding-bottom: 4px;
  font-size: 15px;
  font-family: Rubik-regular, system-ui;
  margin-left: 10px;
}
input:focus {
  border: none;
  outline: none;
}
::placeholder {
  color: rgba(0, 0, 0, 0.3);
}
.primary-button {
  width: 100%;
  margin-top: 20px;
}
</style>